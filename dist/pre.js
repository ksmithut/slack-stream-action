import{a as s,b as f,c as l,d as m}from"./chunk-HH4DAJU3.js";var t=s(f(),1),o=s(l(),1),c=s(m(),1);import n from"node:process";import k from"node:util";async function g(){let r=t.getInput("slack-bot-token")||n.env.SLACK_BOT_TOKEN,I=t.getInput("slack-channel-id")||n.env.SLACK_CHANNEL_ID,d=t.getInput("slack-ts"),i=t.getInput("github-token",{required:!0}),b=t.getInput("status",{required:!0}),e=(0,o.getOctokit)(i),T=new c.WebClient(r);t.info(JSON.stringify({context:o.context,env:n.env},null,2));let a=await e.rest.actions.getWorkflowRun({...o.context.repo,run_id:o.context.runId}),u=await e.rest.repos.getContent({...o.context.repo,path:a.data.path,ref:o.context.ref}),p=await e.paginate(e.rest.actions.listJobsForWorkflowRunAttempt,{...o.context.repo,run_id:o.context.runId,attempt_number:Number.parseInt(n.env.GITHUB_RUN_ATTEMPT||"1",10)});t.info(JSON.stringify(u.data,null,2)),t.info(JSON.stringify(p))}g().catch(r=>{t.error(k.format(r))});export{g as run};
