import{a as m,b as k}from"./chunk-PFWPZI57.js";import{c as r,e as p}from"./chunk-UJFNRH2W.js";var t=r(p(),1),o=r(m(),1),c=r(k(),1);import s from"node:process";import f from"node:util";async function g(){let e=t.getInput("slack-bot-token")||s.env.SLACK_BOT_TOKEN,i=t.getInput("slack-ts"),a=t.getInput("slack-channel-id"),b=t.getInput("status",{required:!0}),u=t.getInput("github-token",{required:!0}),n=(0,o.getOctokit)(u),T=new c.WebClient(e);if(!e)throw new Error("Missing input slack-bot-token or environment variable SLACK_BOT_TOKEN");if(!i)if(a){let l=await n.paginate(n.rest.actions.listJobsForWorkflowRunAttempt,{...o.context.repo,run_id:o.context.runId,attempt_number:Number.parseInt(s.env.GITHUB_RUN_ATTEMPT||"1",10)});t.info(JSON.stringify(l,null,2))}else throw new Error("missing input slack-ts or channel-id")}g().catch(e=>{t.error(f.format(e))});export{g as run};
