import{a as n,b as l,c as p,d as f}from"./chunk-HH4DAJU3.js";var t=n(l(),1),e=n(p(),1),c=n(f(),1);import r from"node:process";import k from"node:util";async function g(){let o=t.getInput("slack-bot-token")||r.env.SLACK_BOT_TOKEN,m=t.getInput("slack-channel-id")||r.env.SLACK_CHANNEL_ID,d=t.getInput("slack-ts"),i=t.getInput("github-token",{required:!0}),h=t.getInput("status",{required:!0}),s=(0,e.getOctokit)(i),I=new c.WebClient(o);t.info(JSON.stringify({context:e.context,env:r.env},null,2));let a=await s.rest.actions.getWorkflowRun({...e.context.repo,run_id:e.context.runId}),u=await s.rest.repos.getContent({...e.context.repo,path:a.data.path,ref:e.context.ref});t.info(JSON.stringify(u.data,null,2))}g().catch(o=>{t.info(k.format(o)),o instanceof Error?t.setFailed(o.message):t.setFailed("Unhandled error")});export{g as run};
