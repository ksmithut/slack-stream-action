import{a as b,b as T,c as i,d as l}from"./chunk-FYXG7M5Y.js";import{c as r,e as g}from"./chunk-UJFNRH2W.js";var t=r(g(),1),o=r(b(),1),m=r(T(),1);import k from"node:process";import I from"node:util";async function w(){let e=t.getInput("slack-bot-token")||k.env.SLACK_BOT_TOKEN,c=t.getInput("slack-channel-id")||k.env.SLACK_CHANNEL_ID,p=t.getInput("github-token",{required:!0}),u=(0,o.getOctokit)(p),n=new m.WebClient(e),a=t.getState("slack-ts"),s=t.getState("slack-thread-ts");if(!a||!c)return;let{mainBlock:f,threadBlock:h,jobLabel:d}=await i(u,o.context);await Promise.all([n.chat.update({channel:c,ts:a,text:o.context.workflow,blocks:[l(o.context),f,{type:"divider"}]}),s&&n.chat.update({channel:c,ts:s,text:d,blocks:[h]})])}w().catch(e=>{t.error(I.format(e))});export{w as run};
